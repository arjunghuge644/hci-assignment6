<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShopEasy - Your Ultimate Shopping Destination</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --info-color: #17a2b8;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
        }

        .navbar-brand {
            font-weight: bold;
            font-size: 1.8rem;
        }

        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--danger-color);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 100px 0;
            text-align: center;
        }

        .hero-section h1 {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .hero-section p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
        }

        .category-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            border: none;
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            background: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .category-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .category-card i {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .product-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            border: none;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            height: 100%;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .product-image {
            height: 250px;
            object-fit: cover;
            width: 100%;
        }

        .rating {
            color: #ffc107;
        }

        .price {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--success-color);
        }

        .btn-primary {
            background: var(--primary-color);
            border: none;
            border-radius: 25px;
            padding: 10px 25px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .sidebar {
            background: var(--light-color);
            border-radius: 15px;
            padding: 1.5rem;
            height: fit-content;
        }

        .filter-section {
            margin-bottom: 2rem;
        }

        .filter-section h6 {
            font-weight: bold;
            margin-bottom: 1rem;
            color: var(--dark-color);
        }

        .product-detail-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 15px;
            margin-bottom: 1rem;
        }

        .thumbnail-gallery {
            display: flex;
            gap: 10px;
            margin-top: 1rem;
        }

        .thumbnail {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 10px;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .thumbnail:hover {
            border-color: var(--primary-color);
            transform: scale(1.05);
        }

        .thumbnail.active {
            border-color: var(--primary-color);
            box-shadow: 0 0 10px rgba(0, 123, 255, 0.5);
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 1rem 0;
        }

        .quantity-btn {
            width: 40px;
            height: 40px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quantity-btn:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .quantity-input {
            width: 60px;
            text-align: center;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 8px;
        }

        .cart-item {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .cart-item img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 10px;
        }

        .order-summary {
            background: var(--light-color);
            border-radius: 15px;
            padding: 2rem;
        }

        .breadcrumb {
            background: none;
            padding: 0;
            margin-bottom: 2rem;
        }

        .breadcrumb-item + .breadcrumb-item::before {
            content: ">";
            color: var(--secondary-color);
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1055;
            min-width: 300px;
        }

        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
        }

        .footer {
            background: var(--dark-color);
            color: white;
            padding: 3rem 0 1rem;
            margin-top: 5rem;
        }

        .social-links a {
            color: white;
            font-size: 1.5rem;
            margin: 0 10px;
            transition: color 0.3s ease;
        }

        .social-links a:hover {
            color: var(--primary-color);
        }

        @media (max-width: 768px) {
            .hero-section h1 {
                font-size: 2.5rem;
            }
            
            .thumbnail-gallery {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#" onclick="showPage('home')">
                <i class="fas fa-shopping-bag"></i> ShopEasy
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showPage('home')">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showPage('products')">Products</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showPage('about')">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showPage('contact')">Contact</a>
                    </li>
                </ul>
                
                <div class="d-flex align-items-center">
                    <div class="position-relative me-3">
                        <button class="btn btn-outline-light" onclick="showPage('cart')">
                            <i class="fas fa-shopping-cart"></i>
                            <span id="cart-badge" class="cart-badge">0</span>
                        </button>
                    </div>
                    <button class="btn btn-primary" onclick="showPage('login')">
                        <i class="fas fa-user"></i> Login
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <!-- Home Page -->
    <div id="home" class="page-section active" style="margin-top: 76px;">
        <!-- Hero Section -->
        <section class="hero-section">
            <div class="container">
                <h1>Welcome to ShopEasy</h1>
                <p>Discover amazing products at unbeatable prices</p>
                <button class="btn btn-light btn-lg" onclick="showPage('products')">
                    <i class="fas fa-shopping-bag"></i> Shop Now
                </button>
            </div>
        </section>

        <!-- Featured Products -->
        <section class="py-5">
            <div class="container">
                <h2 class="text-center mb-5">Featured Products</h2>
                <div class="row" id="featured-products">
                    <!-- Featured products will be loaded here -->
                </div>
            </div>
        </section>

        <!-- Categories -->
        <section class="py-5 bg-light">
            <div class="container">
                <h2 class="text-center mb-5">Shop by Category</h2>
                <div class="row" id="categories-grid">
                    <!-- Categories will be loaded here -->
                </div>
            </div>
        </section>
    </div>

    <!-- Products Page -->
    <div id="products" class="page-section" style="margin-top: 76px;">
        <div class="container py-4">
            <h2 class="mb-4">All Products</h2>
            
            <div class="row">
                <!-- Sidebar -->
                <div class="col-lg-3 col-md-4 mb-4">
                    <div class="sidebar">
                        <!-- Category Filter -->
                        <div class="filter-section">
                            <h6>Categories</h6>
                            <div id="category-filters">
                                <!-- Category filters will be loaded here -->
                            </div>
                        </div>
                        
                        <!-- Price Filter -->
                        <div class="filter-section">
                            <h6>Price Range</h6>
                            <div class="mb-3">
                                <label for="min-price" class="form-label">Min: $<span id="min-price-value">0</span></label>
                                <input type="range" class="form-range" id="min-price" min="0" max="1000" value="0">
                            </div>
                            <div class="mb-3">
                                <label for="max-price" class="form-label">Max: $<span id="max-price-value">1000</span></label>
                                <input type="range" class="form-range" id="max-price" min="0" max="1000" value="1000">
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="applyFilters()">Apply Filters</button>
                        </div>
                    </div>
                </div>
                
                <!-- Products Grid -->
                <div class="col-lg-9 col-md-8">
                    <!-- Sorting -->
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <span id="products-count">Showing all products</span>
                        <select class="form-select" style="width: auto;" id="sort-select" onchange="sortProducts()">
                            <option value="name">Sort by Name</option>
                            <option value="price-low">Price: Low to High</option>
                            <option value="price-high">Price: High to Low</option>
                            <option value="rating">Sort by Rating</option>
                        </select>
                    </div>
                    
                    <div class="row" id="products-grid">
                        <!-- Products will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Product Detail Page -->
    <div id="product-detail" class="page-section" style="margin-top: 76px;">
        <div class="container py-4">
            <!-- Breadcrumb -->
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="#" onclick="showPage('home')">Home</a></li>
                    <li class="breadcrumb-item"><a href="#" onclick="showPage('products')">Products</a></li>
                    <li class="breadcrumb-item active" id="breadcrumb-product">Product</li>
                </ol>
            </nav>
            
            <div id="product-detail-content">
                <!-- Product detail content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Shopping Cart Page -->
    <div id="cart" class="page-section" style="margin-top: 76px;">
        <div class="container py-4">
            <h2 class="mb-4">Shopping Cart</h2>
            
            <div class="row">
                <div class="col-lg-8">
                    <div id="cart-items">
                        <!-- Cart items will be loaded here -->
                    </div>
                </div>
                
                <div class="col-lg-4">
                    <div class="order-summary">
                        <h4 class="mb-3">Order Summary</h4>
                        <div class="d-flex justify-content-between mb-2">
                            <span>Subtotal:</span>
                            <span id="subtotal">$0.00</span>
                        </div>
                        <div class="d-flex justify-content-between mb-2">
                            <span>Tax (10%):</span>
                            <span id="tax">$0.00</span>
                        </div>
                        <hr>
                        <div class="d-flex justify-content-between mb-3">
                            <strong>Total:</strong>
                            <strong id="total">$0.00</strong>
                        </div>
                        <button class="btn btn-primary btn-lg w-100" onclick="checkout()">
                            <i class="fas fa-credit-card"></i> Proceed to Checkout
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- About Page -->
    <div id="about" class="page-section" style="margin-top: 76px;">
        <div class="container py-5">
            <h2 class="text-center mb-5">About ShopEasy</h2>
            <div class="row">
                <div class="col-lg-8 mx-auto">
                    <p class="lead text-center mb-5">We are committed to providing the best online shopping experience with quality products and exceptional service.</p>
                    
                    <div class="row text-center">
                        <div class="col-md-4 mb-4">
                            <i class="fas fa-truck fa-3x text-primary mb-3"></i>
                            <h4>Free Shipping</h4>
                            <p>Free shipping on all orders over $50</p>
                        </div>
                        <div class="col-md-4 mb-4">
                            <i class="fas fa-shield-alt fa-3x text-primary mb-3"></i>
                            <h4>Secure Payment</h4>
                            <p>100% secure and encrypted payments</p>
                        </div>
                        <div class="col-md-4 mb-4">
                            <i class="fas fa-headset fa-3x text-primary mb-3"></i>
                            <h4>24/7 Support</h4>
                            <p>Round the clock customer support</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Contact Page -->
    <div id="contact" class="page-section" style="margin-top: 76px;">
        <div class="container py-5">
            <h2 class="text-center mb-5">Contact Us</h2>
            <div class="row">
                <div class="col-lg-8 mx-auto">
                    <form onsubmit="submitContact(event)">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="name" class="form-label">Name</label>
                                <input type="text" class="form-control" id="name" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="email" class="form-label">Email</label>
                                <input type="email" class="form-control" id="email" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="subject" class="form-label">Subject</label>
                            <input type="text" class="form-control" id="subject" required>
                        </div>
                        <div class="mb-3">
                            <label for="message" class="form-label">Message</label>
                            <textarea class="form-control" id="message" rows="5" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="fas fa-paper-plane"></i> Send Message
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Page -->
    <div id="login" class="page-section" style="margin-top: 76px;">
        <div class="container py-5">
            <div class="row justify-content-center">
                <div class="col-lg-6 col-md-8">
                    <div class="card shadow">
                        <div class="card-body p-5">
                            <h2 class="text-center mb-4">Login to ShopEasy</h2>
                            <form onsubmit="submitLogin(event)">
                                <div class="mb-3">
                                    <label for="login-email" class="form-label">Email</label>
                                    <input type="email" class="form-control" id="login-email" required>
                                </div>
                                <div class="mb-3">
                                    <label for="password" class="form-label">Password</label>
                                    <input type="password" class="form-control" id="password" required>
                                </div>
                                <div class="mb-3 form-check">
                                    <input type="checkbox" class="form-check-input" id="remember">
                                    <label class="form-check-label" for="remember">Remember me</label>
                                </div>
                                <button type="submit" class="btn btn-primary btn-lg w-100">
                                    <i class="fas fa-sign-in-alt"></i> Login
                                </button>
                            </form>
                            <div class="text-center mt-3">
                                <p>Don't have an account? <a href="#">Sign up here</a></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-3">
                    <h5><i class="fas fa-shopping-bag"></i> ShopEasy</h5>
                    <p>Your ultimate shopping destination for quality products at great prices.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6 mb-3">
                    <h6>Quick Links</h6>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-light" onclick="showPage('home')">Home</a></li>
                        <li><a href="#" class="text-light" onclick="showPage('products')">Products</a></li>
                        <li><a href="#" class="text-light" onclick="showPage('about')">About</a></li>
                        <li><a href="#" class="text-light" onclick="showPage('contact')">Contact</a></li>
                    </ul>
                </div>
                <div class="col-lg-3 col-md-6 mb-3">
                    <h6>Categories</h6>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-light">Electronics</a></li>
                        <li><a href="#" class="text-light">Clothing</a></li>
                        <li><a href="#" class="text-light">Books</a></li>
                        <li><a href="#" class="text-light">Sports</a></li>
                    </ul>
                </div>
                <div class="col-lg-3 col-md-6 mb-3">
                    <h6>Contact Info</h6>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-map-marker-alt"></i> 123 Shop Street, City</li>
                        <li><i class="fas fa-phone"></i> +1 234 567 890</li>
                        <li><i class="fas fa-envelope"></i> info@shopeasy.com</li>
                    </ul>
                </div>
            </div>
            <hr>
            <div class="text-center">
                <p>&copy; 2025 ShopEasy. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Application State (using in-memory storage instead of localStorage)
        let appState = {
            products: [
                {
                    id: 1,
                    name: "Wireless Bluetooth Headphones",
                    price: 99.99,
                    category: "Electronics",
                    image: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400",
                    gallery: [
                        "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400",
                        "https://images.unsplash.com/photo-1484704849700-f032a568e944?w=400",
                        "https://images.unsplash.com/photo-1487215078519-e21cc028cb29?w=400"
                    ],
                    rating: 4.5,
                    description: "Premium wireless headphones with noise cancellation and 30-hour battery life.",
                    specifications: [
                        "Bluetooth 5.0 connectivity",
                        "Active noise cancellation", 
                        "30-hour battery life",
                        "Fast charging (15 min = 3 hours)"
                    ]
                },
                {
                    id: 2,
                    name: "Smart Fitness Watch",
                    price: 249.99,
                    category: "Electronics",
                    image: "https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400",
                    gallery: [
                        "https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400",
                        "https://images.unsplash.com/photo-1551698618-1dfe5d97d256?w=400",
                        "https://images.unsplash.com/photo-1546868871-7041f2a55e12?w=400"
                    ],
                    rating: 4.7,
                    description: "Advanced fitness tracking with heart rate monitoring and GPS.",
                    specifications: [
                        "Heart rate monitoring",
                        "Built-in GPS",
                        "Water resistant",
                        "7-day battery life"
                    ]
                },
                {
                    id: 3,
                    name: "Organic Cotton T-Shirt", 
                    price: 29.99,
                    category: "Clothing",
                    image: "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400",
                    gallery: [
                        "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400",
                        "https://images.unsplash.com/photo-1583743814966-8936f37f4678?w=400",
                        "https://images.unsplash.com/photo-1576566588028-4147f3842f27?w=400"
                    ],
                    rating: 4.3,
                    description: "Comfortable organic cotton t-shirt in various colors.",
                    specifications: [
                        "100% organic cotton",
                        "Machine washable",
                        "Available in S, M, L, XL", 
                        "Multiple colors"
                    ]
                },
                {
                    id: 4,
                    name: "Professional Camera",
                    price: 599.99,
                    category: "Electronics",
                    image: "https://images.unsplash.com/photo-1606983340126-99ab4feaa64a?w=400",
                    gallery: [
                        "https://images.unsplash.com/photo-1606983340126-99ab4feaa64a?w=400",
                        "https://images.unsplash.com/photo-1502920917128-1aa500764cbd?w=400",
                        "https://images.unsplash.com/photo-1609008003965-30abacad6407?w=400",
                        "https://images.unsplash.com/photo-1519183071298-a2962feb14f4?w=400"
                    ],
                    rating: 4.8,
                    description: "Professional DSLR camera with advanced features.",
                    specifications: [
                        "24MP sensor",
                        "4K video recording", 
                        "Weather sealed body",
                        "Dual memory card slots"
                    ]
                },
                {
                    id: 5,
                    name: "Running Shoes",
                    price: 129.99,
                    category: "Sports",
                    image: "https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400",
                    gallery: [
                        "https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400",
                        "https://images.unsplash.com/photo-1525966222134-fcfa99b8ae77?w=400",
                        "https://images.unsplash.com/photo-1560769629-975ec94e6a86?w=400"
                    ],
                    rating: 4.6,
                    description: "Lightweight running shoes with superior cushioning.",
                    specifications: [
                        "Breathable mesh upper",
                        "Responsive cushioning",
                        "Durable rubber outsole", 
                        "Available in multiple sizes"
                    ]
                },
                {
                    id: 6,
                    name: "Programming Book",
                    price: 49.99,
                    category: "Books", 
                    image: "https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=400",
                    gallery: [
                        "https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=400",
                        "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400"
                    ],
                    rating: 4.4,
                    description: "Comprehensive guide to modern web development.",
                    specifications: [
                        "500+ pages",
                        "Practical examples",
                        "Latest frameworks",
                        "Beginner to advanced"
                    ]
                }
            ],
            categories: [
                { id: 1, name: "Electronics", icon: "fas fa-laptop", count: 25 },
                { id: 2, name: "Clothing", icon: "fas fa-tshirt", count: 40 },
                { id: 3, name: "Books", icon: "fas fa-book", count: 30 },
                { id: 4, name: "Sports", icon: "fas fa-football-ball", count: 20 }
            ],
            cart: [],
            currentPage: 'home',
            filters: {
                category: '',
                minPrice: 0,
                maxPrice: 1000
            },
            sortBy: 'name'
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            loadFeaturedProducts();
            loadCategories();
            loadProducts();
            loadCategoryFilters();
            setupPriceFilters();
            updateCartBadge();
        }

        // Page Navigation
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            appState.currentPage = pageId;
            
            // Scroll to top
            window.scrollTo(0, 0);
            
            // Load page-specific content
            if (pageId === 'products') {
                loadProducts();
            } else if (pageId === 'cart') {
                loadCart();
            }
        }

        // Load Featured Products
        function loadFeaturedProducts() {
            const container = document.getElementById('featured-products');
            const featuredProducts = appState.products.slice(0, 3);
            
            container.innerHTML = featuredProducts.map(product => `
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card product-card" onclick="showProductDetail(${product.id})">
                        <img src="${product.image}" class="card-img-top product-image" alt="${product.name}">
                        <div class="card-body">
                            <h5 class="card-title">${product.name}</h5>
                            <p class="card-text">${product.description}</p>
                            <div class="rating mb-2">
                                ${generateStars(product.rating)}
                                <span class="ms-1">(${product.rating})</span>
                            </div>
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="price">$${product.price}</span>
                                <button class="btn btn-primary btn-sm" onclick="event.stopPropagation(); addToCart(${product.id})">
                                    <i class="fas fa-cart-plus"></i> Add to Cart
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Load Categories
        function loadCategories() {
            const container = document.getElementById('categories-grid');
            
            container.innerHTML = appState.categories.map(category => `
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="card category-card" onclick="filterByCategory('${category.name}')">
                        <div class="card-body">
                            <i class="${category.icon}"></i>
                            <h5 class="card-title">${category.name}</h5>
                            <p class="card-text">${category.count} products</p>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Load Products
        function loadProducts() {
            const container = document.getElementById('products-grid');
            let filteredProducts = [...appState.products];
            
            // Apply filters
            if (appState.filters.category) {
                filteredProducts = filteredProducts.filter(p => p.category === appState.filters.category);
            }
            
            filteredProducts = filteredProducts.filter(p => 
                p.price >= appState.filters.minPrice && p.price <= appState.filters.maxPrice
            );
            
            // Apply sorting
            filteredProducts.sort((a, b) => {
                switch(appState.sortBy) {
                    case 'price-low':
                        return a.price - b.price;
                    case 'price-high':
                        return b.price - a.price;
                    case 'rating':
                        return b.rating - a.rating;
                    case 'name':
                    default:
                        return a.name.localeCompare(b.name);
                }
            });
            
            document.getElementById('products-count').textContent = 
                `Showing ${filteredProducts.length} products`;
            
            container.innerHTML = filteredProducts.map(product => `
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card product-card">
                        <img src="${product.image}" class="card-img-top product-image" alt="${product.name}">
                        <div class="card-body">
                            <h5 class="card-title">${product.name}</h5>
                            <p class="card-text">${product.description}</p>
                            <div class="rating mb-2">
                                ${generateStars(product.rating)}
                                <span class="ms-1">(${product.rating})</span>
                            </div>
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <span class="price">$${product.price}</span>
                            </div>
                            <div class="d-grid gap-2">
                                <button class="btn btn-outline-primary" onclick="showProductDetail(${product.id})">
                                    <i class="fas fa-eye"></i> View Details
                                </button>
                                <button class="btn btn-primary" onclick="addToCart(${product.id})">
                                    <i class="fas fa-cart-plus"></i> Add to Cart
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Show Product Detail
        function showProductDetail(productId) {
            const product = appState.products.find(p => p.id === productId);
            if (!product) return;
            
            document.getElementById('breadcrumb-product').textContent = product.name;
            
            const container = document.getElementById('product-detail-content');
            container.innerHTML = `
                <div class="row">
                    <div class="col-lg-6">
                        <img src="${product.gallery[0]}" class="product-detail-image" id="main-product-image" alt="${product.name}">
                        <div class="thumbnail-gallery">
                            ${product.gallery.map((img, index) => `
                                <img src="${img}" class="thumbnail ${index === 0 ? 'active' : ''}" 
                                     onclick="changeMainImage('${img}', this)" alt="Thumbnail ${index + 1}">
                            `).join('')}
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <h2>${product.name}</h2>
                        <div class="rating mb-3">
                            ${generateStars(product.rating)}
                            <span class="ms-1">(${product.rating} stars)</span>
                        </div>
                        <div class="price mb-3">$${product.price}</div>
                        <p class="mb-3">${product.description}</p>
                        
                        <h5>Specifications:</h5>
                        <ul class="mb-4">
                            ${product.specifications.map(spec => `<li>${spec}</li>`).join('')}
                        </ul>
                        
                        <div class="quantity-controls">
                            <span>Quantity:</span>
                            <button class="quantity-btn" onclick="decreaseQuantity()">-</button>
                            <input type="number" class="quantity-input" id="product-quantity" value="1" min="1">
                            <button class="quantity-btn" onclick="increaseQuantity()">+</button>
                        </div>
                        
                        <button class="btn btn-primary btn-lg mt-3" onclick="addToCartWithQuantity(${product.id})">
                            <i class="fas fa-cart-plus"></i> Add to Cart
                        </button>
                    </div>
                </div>
                
                <div class="row mt-5">
                    <div class="col-12">
                        <h4>Customer Reviews</h4>
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle"></i> Reviews feature coming soon! Stay tuned for customer feedback.
                        </div>
                    </div>
                </div>
            `;
            
            showPage('product-detail');
        }

        // Change main product image
        function changeMainImage(imageSrc, thumbnailElement) {
            document.getElementById('main-product-image').src = imageSrc;
            
            // Update active thumbnail
            document.querySelectorAll('.thumbnail').forEach(thumb => thumb.classList.remove('active'));
            thumbnailElement.classList.add('active');
        }

        // Quantity controls
        function increaseQuantity() {
            const input = document.getElementById('product-quantity');
            input.value = parseInt(input.value) + 1;
        }

        function decreaseQuantity() {
            const input = document.getElementById('product-quantity');
            if (parseInt(input.value) > 1) {
                input.value = parseInt(input.value) - 1;
            }
        }

        // Add to cart functions
        function addToCart(productId) {
            const product = appState.products.find(p => p.id === productId);
            if (!product) return;
            
            const existingItem = appState.cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                appState.cart.push({...product, quantity: 1});
            }
            
            updateCartBadge();
            showToast('Product added to cart!', 'success');
        }

        function addToCartWithQuantity(productId) {
            const product = appState.products.find(p => p.id === productId);
            const quantity = parseInt(document.getElementById('product-quantity').value);
            
            if (!product) return;
            
            const existingItem = appState.cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                appState.cart.push({...product, quantity: quantity});
            }
            
            updateCartBadge();
            showToast(`${quantity} item(s) added to cart!`, 'success');
        }

        // Load Cart
        function loadCart() {
            const container = document.getElementById('cart-items');
            
            if (appState.cart.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-5">
                        <i class="fas fa-shopping-cart fa-4x text-muted mb-3"></i>
                        <h4>Your cart is empty</h4>
                        <p class="text-muted">Add some products to get started!</p>
                        <button class="btn btn-primary" onclick="showPage('products')">
                            <i class="fas fa-shopping-bag"></i> Continue Shopping
                        </button>
                    </div>
                `;
            } else {
                container.innerHTML = appState.cart.map(item => `
                    <div class="cart-item">
                        <div class="row align-items-center">
                            <div class="col-md-2">
                                <img src="${item.image}" alt="${item.name}">
                            </div>
                            <div class="col-md-4">
                                <h5>${item.name}</h5>
                                <p class="text-muted">$${item.price} each</p>
                            </div>
                            <div class="col-md-3">
                                <div class="quantity-controls">
                                    <button class="quantity-btn" onclick="updateCartItemQuantity(${item.id}, ${item.quantity - 1})">
                                        -
                                    </button>
                                    <input type="number" class="quantity-input" value="${item.quantity}" 
                                           onchange="updateCartItemQuantity(${item.id}, this.value)" min="1">
                                    <button class="quantity-btn" onclick="updateCartItemQuantity(${item.id}, ${item.quantity + 1})">
                                        +
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <strong>$${(item.price * item.quantity).toFixed(2)}</strong>
                            </div>
                            <div class="col-md-1">
                                <button class="btn btn-outline-danger btn-sm" onclick="removeFromCart(${item.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
            
            updateOrderSummary();
        }

        // Update cart item quantity
        function updateCartItemQuantity(productId, newQuantity) {
            newQuantity = parseInt(newQuantity);
            if (newQuantity < 1) {
                removeFromCart(productId);
                return;
            }
            
            const item = appState.cart.find(item => item.id === productId);
            if (item) {
                item.quantity = newQuantity;
                updateCartBadge();
                loadCart();
            }
        }

        // Remove from cart
        function removeFromCart(productId) {
            appState.cart = appState.cart.filter(item => item.id !== productId);
            updateCartBadge();
            loadCart();
            showToast('Product removed from cart', 'info');
        }

        // Update cart badge
        function updateCartBadge() {
            const totalItems = appState.cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cart-badge').textContent = totalItems;
        }

        // Update order summary
        function updateOrderSummary() {
            const subtotal = appState.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const tax = subtotal * 0.1;
            const total = subtotal + tax;
            
            document.getElementById('subtotal').textContent = `$${subtotal.toFixed(2)}`;
            document.getElementById('tax').textContent = `$${tax.toFixed(2)}`;
            document.getElementById('total').textContent = `$${total.toFixed(2)}`;
        }

        // Filtering and Sorting
        function loadCategoryFilters() {
            const container = document.getElementById('category-filters');
            container.innerHTML = `
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="category" id="all-categories" 
                           value="" ${!appState.filters.category ? 'checked' : ''} onchange="filterByCategory('')">
                    <label class="form-check-label" for="all-categories">All Categories</label>
                </div>
                ${appState.categories.map(category => `
                    <div class="form-check mb-2">
                        <input class="form-check-input" type="radio" name="category" id="cat-${category.id}" 
                               value="${category.name}" ${appState.filters.category === category.name ? 'checked' : ''} 
                               onchange="filterByCategory('${category.name}')">
                        <label class="form-check-label" for="cat-${category.id}">${category.name}</label>
                    </div>
                `).join('')}
            `;
        }

        function setupPriceFilters() {
            const minPriceSlider = document.getElementById('min-price');
            const maxPriceSlider = document.getElementById('max-price');
            const minPriceValue = document.getElementById('min-price-value');
            const maxPriceValue = document.getElementById('max-price-value');
            
            minPriceSlider.addEventListener('input', function() {
                minPriceValue.textContent = this.value;
            });
            
            maxPriceSlider.addEventListener('input', function() {
                maxPriceValue.textContent = this.value;
            });
        }

        function filterByCategory(category) {
            appState.filters.category = category;
            if (appState.currentPage === 'products') {
                loadProducts();
            } else {
                showPage('products');
            }
        }

        function applyFilters() {
            appState.filters.minPrice = parseInt(document.getElementById('min-price').value);
            appState.filters.maxPrice = parseInt(document.getElementById('max-price').value);
            loadProducts();
        }

        function sortProducts() {
            appState.sortBy = document.getElementById('sort-select').value;
            loadProducts();
        }

        // Helper functions
        function generateStars(rating) {
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 !== 0;
            let starsHtml = '';
            
            for (let i = 0; i < fullStars; i++) {
                starsHtml += '<i class="fas fa-star"></i>';
            }
            
            if (hasHalfStar) {
                starsHtml += '<i class="fas fa-star-half-alt"></i>';
            }
            
            const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
            for (let i = 0; i < emptyStars; i++) {
                starsHtml += '<i class="far fa-star"></i>';
            }
            
            return starsHtml;
        }

        function showToast(message, type = 'info') {
            const toastContainer = document.getElementById('toast-container');
            const toastId = 'toast-' + Date.now();
            
            const toastHtml = `
                <div class="toast show" id="${toastId}" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header bg-${type} text-white">
                        <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'} me-2"></i>
                        <strong class="me-auto">ShopEasy</strong>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"></button>
                    </div>
                    <div class="toast-body">
                        ${message}
                    </div>
                </div>
            `;
            
            toastContainer.innerHTML = toastHtml;
            
            // Auto remove toast after 3 seconds
            setTimeout(() => {
                const toastElement = document.getElementById(toastId);
                if (toastElement) {
                    toastElement.remove();
                }
            }, 3000);
        }

        // Form submissions
        function submitContact(event) {
            event.preventDefault();
            showToast('Thank you for your message! We will get back to you soon.', 'success');
            event.target.reset();
        }

        function submitLogin(event) {
            event.preventDefault();
            showToast('Login functionality will be available soon!', 'info');
        }

        function checkout() {
            if (appState.cart.length === 0) {
                showToast('Your cart is empty!', 'error');
                return;
            }
            showToast('Checkout functionality will be available soon!', 'info');
        }
    </script>
</body>
</html>